# Custom CircleCI Config
# https://circleci.com/docs/1.0/configuration/

machine:
  python:
    version: "3.6.1"

dependencies:
  override:
  - "pip install -U -r requirements.txt"
  - "pip install -U -r requirements-test.txt"

general:
  artifacts:
  - "cover/"

test:
  pre:
  - "flake8 src/"
  override:
  - "nosetests --with-xunit --with-coverage --cover-html --cover-package=ultros --cover-inclusive --cover-xml --cover-xml-file=nose-coverage.xml -v tests/"
  post:
  - "mkdir $CIRCLE_TEST_REPORTS/nose"
  - "mv nosetests.xml $CIRCLE_TEST_REPORTS/nose/nosetests.xml"
